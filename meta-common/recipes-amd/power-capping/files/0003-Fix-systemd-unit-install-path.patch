From be75c3626f67dfa7bba643ecbce4e8104e91c0eb Mon Sep 17 00:00:00 2001
From: Illia Volchanetskyi <Illia_Volchanetskyi6439@jabil.com>
Date: Wed, 19 Jun 2024 10:47:15 +0300
Subject: [PATCH] Fix systemd unit install path

---
 CMakeLists.txt | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index a6da54d..9603dc3 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -54,6 +54,8 @@ install (TARGETS ${PROJECT_NAME} DESTINATION ${CMAKE_INSTALL_BINDIR})
 target_compile_definitions (
     ${PROJECT_NAME} PRIVATE $<$<BOOL:${ENABLE_POWER_CAPPING_LOG}>: -DENABLE_POWER_CAPPING_LOG>
 )
-install (FILES ${SERVICE_FILES} DESTINATION /lib/systemd/system/)
+find_package(PkgConfig REQUIRED)
+pkg_get_variable(SYSTEMD_SYSTEM_UNIT_DIR systemd systemdsystemunitdir)
+install (FILES ${SERVICE_FILES} DESTINATION "${SYSTEMD_SYSTEM_UNIT_DIR}")
 
 message(STATUS "Toolchain file defaulted to ......'${CMAKE_INATLL_BINDIR}'")
